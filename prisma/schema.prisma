// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int            @id @default(autoincrement())
  first_name    String
  last_name     String
  phone_number  String
  email         String         @unique
  password      String
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  subscriptions Subscription[]
  apps          App[]
  isAdmin       Boolean        @default(false)
}

model Subscription {
  id     Int    @id @default(autoincrement())
  plan   Plan   @relation(fields: [planId], references: [id])
  planId Int 
  users  User[]
}

model Plan {
  id                Int            @id @default(autoincrement())
  plan_name         String
  plan_features     String
  plan_category     String
  plan_price        Int
  plan_duration     String
  app_build_allowed String
  subcription       Subscription[]
}


model App {
  id             Int       @id @default(autoincrement())
  user           User      @relation(fields: [userId], references: [id])
  userId         Int
  features       Features? // Define optional one-to-one relationship with Features
  website_url    String
  app_type      APP_TYPE
}

enum APP_TYPE {
  ANDROID
  IOS
}

model Features {
  id             Int       @id @default(autoincrement())
  name           String    // Name of the feature
  customization  Json      // Store customization options in JSON format
  app            App       @relation(fields: [appId], references: [id])
  appId          Int       @unique// Foreign key to associate feature with its app
}

  